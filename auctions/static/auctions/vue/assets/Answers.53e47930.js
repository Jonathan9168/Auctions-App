import{d as l,_ as d,o as c,c as u,a as e,t as h}from"./index.ed948278.js";const p=l({data(){return{id:this.$route.params.id,question:""}},components:{},methods:{async send_answer(){if(document.getElementById("typeAnswerX").value==""){alert("Please type in the answer field");return}let t=document.getElementById("typeAnswerX").value;console.log(this.get_id());let n={answer:t,user:await this.get_id(),question:this.id};await fetch("http://127.0.0.1:8000/api/answers/",{method:"POST",headers:{"X-CSRFToken":this.getCookie()},body:JSON.stringify(n)}),history.back()},async get_id(){return(await(await fetch("http://127.0.0.1:8000/api/uid/",{method:"GET"})).json()).id},getCookie(){let s="";if(document.cookie&&document.cookie!=="")for(var o=document.cookie.split(";"),t=0;t<o.length;t++){var n=o[t].trim();if(n.substring(0,10)==="csrftoken="){s=decodeURIComponent(n.substring(10));break}}return s},async fetch_question(){let s="http://127.0.0.1:8000/api/question/"+this.id+"/",o=await fetch(s,{method:"GET"});o.ok||(alert("This question does not exist"),window.location.replace("http://127.0.0.1:8000/listings"));let t=await o.json();console.log(t),this.question=t.question[0].question,t.question[0].answer!=null&&(alert("This question has already been answered"),window.location.replace("http://127.0.0.1:8000/listings"));let n="http://127.0.0.1:8000/api/item/"+t.question[0].item+"/",a=await(await fetch(n,{method:"GET"})).json(),i=this.get_id();a.item[0].user!=i}},mounted(){this.fetch_question()}}),m={class:"vh-100 gradient-custom"},_={class:"container py-5 h-100"},f={class:"row d-flex justify-content-center align-items-center h-100"},w={class:"col-12 col-md-8 col-lg-6 col-xl-5"},b={class:"card bg-dark text-white",style:{"border-radius":"1rem"}},g={class:"card-body p-5 text-center"},y={class:"mb-md-5 mt-md-4 pb-5"},q=e("h2",{class:"fw-bold mb-2 text-uppercase card-text-colour"}," Answer ",-1),v={id:"post",class:"p-1"},k={class:"form-outline form-white mb-4"},x=e("label",{class:"form-label card-text-colour2",for:"typeAnswerX"},"Enter your Answer here:",-1),A=e("textarea",{id:"typeAnswerX",class:"form-control form-control-lg",required:""},null,-1);function E(s,o,t,n,r,a){return c(),u("section",m,[e("div",_,[e("div",f,[e("div",w,[e("div",b,[e("div",g,[e("div",y,[q,e("form",v,[e("div",k,[e("p",null,"Question: "+h(s.question),1),x,A])]),e("button",{class:"btn btn-outline-light btn-lg px-5",onClick:o[0]||(o[0]=(...i)=>s.send_answer&&s.send_answer(...i)),type:"submit"}," Submit ")])])])])])])])}const j=d(p,[["render",E]]);export{j as default};
