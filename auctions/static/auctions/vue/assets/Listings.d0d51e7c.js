import{d as p,_ as h,r as m,o as c,c as i,a as e,F as _,e as g,t as l,b,w as f}from"./index.ed948278.js";const y=p({data(){return{items:[]}},components:{},methods:{async fetch_items(){console.log(document.cookie.split(";")),console.log(document.cookie.split(";").length>1);let t=await(await fetch("http://127.0.0.1:8000/api/items/",{method:"GET",credentials:"include",mode:"cors",referrerPolicy:"no-referrer"})).json();this.items=t.items},formatDate(s){var t=new Date(s).getHours(),o=new Date(s).getMinutes(),r=t>=12?"pm":"am";t=t%12,t=t||12;var a=o<10?"0"+o:o,d=t+":"+a+" "+r;return new Date(s).getDate()+"/"+(new Date(s).getMonth()+1)+"/"+new Date(s).getFullYear()+"  "+d},async search_results(){let o={get_type:"search",term:document.getElementById("search_bar").value},a=await(await fetch("http://127.0.0.1:8000/api/items/",{method:"POST",headers:{"X-CSRFToken":this.getCookie()},body:JSON.stringify(o)})).json();this.items=a.items},getCookie(){let s="";if(document.cookie&&document.cookie!=="")for(var t=document.cookie.split(";"),o=0;o<t.length;o++){var r=t[o].trim();if(r.substring(0,10)==="csrftoken="){s=decodeURIComponent(r.substring(10));break}}return s}},mounted(){this.fetch_items()}}),k={class:"gradient-custom"},v={class:"container py-5 background-colour"},w={class:"table table-striped table-dark text-white table-hover text-center table-bordered"},D=e("thead",null,[e("tr",null,[e("th",{colspan:"6",class:"p-3 card-text-colour"},"LISTINGS")]),e("tr",null,[e("th",{scope:"col",class:"p-3"},"Ending time"),e("th",{scope:"col",class:"p-3"},"Image"),e("th",{scope:"col",class:"p-3"},"Title"),e("th",{scope:"col",class:"p-3"},"Description"),e("th",{scope:"col",class:"p-3"},"Current bid"),e("th",{scope:"col",class:"p-3"},"View")])],-1),C={style:{"text-align":"center","vertical-align":"middle"}},I=["src"],S=e("button",{class:"btn btn-secondary"}," VIEW LISTING ",-1),x={style:{width:"15%",margin:"auto"},class:"input-group"},T=e("input",{type:"search",class:"form-control rounded",placeholder:"Search...",id:"search_bar"},null,-1);function E(s,t,o,r,a,d){const u=m("router-link");return c(),i("section",k,[e("div",v,[e("table",w,[D,e("tbody",null,[(c(!0),i(_,null,g(s.items,n=>(c(),i("tr",C,[e("td",null,l(s.formatDate(n.auction_end_time)),1),e("td",null,[e("img",{src:"http://127.0.0.1:8000/media/"+n.image,style:{height:"75px",width:"75px"}},null,8,I)]),e("td",null,l(n.title),1),e("td",null,l(n.description),1),e("td",null,"\xA3"+l(n.starting_price),1),e("td",null,[b(u,{to:"/item/"+n.id},{default:f(()=>[S]),_:2},1032,["to"])])]))),256))])])]),e("div",x,[T,e("button",{type:"button",class:"btn btn-outline-primary",onClick:t[0]||(t[0]=(...n)=>s.search_results&&s.search_results(...n))}," search ")])])}const V=h(y,[["render",E]]);export{V as default};
