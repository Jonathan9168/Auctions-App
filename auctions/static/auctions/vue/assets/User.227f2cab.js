import f from"./Listings.d0d51e7c.js";import{d as b,_ as w,r as v,o as i,c as n,a as t,t as a,F as y,e as x,b as k,w as D}from"./index.ed948278.js";const N=b({data(){return{id:this.$route.params.id,user:[],items:[]}},components:{Listings:f},methods:{async fetch_user(){let e="http://127.0.0.1:8000/api/user/"+this.id+"/",s=await fetch(e,{method:"GET"});s.status==404&&(alert("This user does not exist"),window.location.replace("http://127.0.0.1:8000/listings/"));let o=await s.json();this.user=o.user},formatDate(e){var s=new Date(e).getHours(),o=new Date(e).getMinutes(),r=s>=12?"pm":"am";s=s%12,s=s||12;var c=o<10?"0"+o:o,d=s+":"+c+" "+r;return new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear()+"  "+d},async fetch_items(){let s=await(await fetch("http://127.0.0.1:8000/api/items/",{method:"GET"})).json();console.log(s.items);let o=+this.id;console.log(o),this.items=s.items.filter(function(r,c){return r.user===o},o)}},mounted(){this.fetch_user(),this.fetch_items()}}),T={class:"container mt-4"},I={class:"row"},E={class:"col-sm-2 text-center mb-2"},$=["src"],C=["src"],G={class:"col-sm-8 text-center p-2 rounded",style:{"background-color":"rgb(23,45,125,0.2)"}},L={class:"text-secondary"},S={class:"text-secondary"},V={class:"gradient-custom"},B={class:"container py-5 background-colour"},F={class:"table table-striped table-dark text-white table-hover text-center table-bordered"},j=t("thead",null,[t("tr",null,[t("th",{colspan:"6",class:"p-3 card-text-colour"},"LISTINGS")]),t("tr",null,[t("th",{scope:"col",class:"p-3"},"Ending time"),t("th",{scope:"col",class:"p-3"},"Image"),t("th",{scope:"col",class:"p-3"},"Title"),t("th",{scope:"col",class:"p-3"},"Description"),t("th",{scope:"col",class:"p-3"},"Current bid"),t("th",{scope:"col",class:"p-3"},"View")])],-1),M={key:0},A=["src"],H=t("button",{class:"btn btn-secondary"}," VIEW LISTING ",-1),U={key:1},W=t("tr",null,[t("td",{class:"text-secondary"},"No items to display"),t("td",{class:"text-secondary"},"No items to display"),t("td",{class:"text-secondary"}," No items to display"),t("td",{class:"text-secondary"},"No items to display"),t("td",{class:"text-secondary"},"No items to display"),t("td",{class:"text-secondary"},"No items to display")],-1),Y=[W];function q(e,s,o,r,c,d){var h,p,u,m,_;const g=v("router-link");return i(),n(y,null,[t("div",T,[t("div",I,[t("div",E,[((h=e.user[0])==null?void 0:h.profile_picture)!=null?(i(),n("img",{key:0,src:"http://127.0.0.1:8000/media/"+((p=e.user[0])==null?void 0:p.profile_picture),style:{width:"5em",height:"5em"}},null,8,$)):(i(),n("img",{key:1,src:"http://127.0.0.1:8000/media/default_profile_picture.png",style:{width:"5em",height:"5em"}},null,8,C))]),t("div",G,[t("h1",null,a((u=e.user[0])==null?void 0:u.email),1),t("p",L,a((m=e.user[0])==null?void 0:m.city),1),t("p",S,a((_=e.user[0])==null?void 0:_.dob),1)])])]),t("section",V,[t("div",B,[t("table",F,[j,e.items.length>0?(i(),n("tbody",M,[(i(!0),n(y,null,x(e.items,l=>(i(),n("tr",null,[t("td",null,a(e.formatDate(l.auction_end_time)),1),t("td",null,[t("img",{src:"http://127.0.0.1:8000/media/"+l.image,style:{height:"100px",width:"100px"}},null,8,A)]),t("td",null,a(l.title),1),t("td",null,a(l.description),1),t("td",null,"\xA3"+a(l.starting_price),1),t("td",null,[k(g,{to:"/item/"+l.id},{default:D(()=>[H]),_:2},1032,["to"])])]))),256))])):(i(),n("tbody",U,Y))])])])],64)}const K=w(N,[["render",q]]);export{K as default};
